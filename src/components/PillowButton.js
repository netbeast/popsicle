import React, {Component} from 'react'
import {Image, View, TouchableOpacity, StyleSheet} from 'react-native'
import {Svg, G, Path} from 'react-native-svg'
import {Txt} from './'

import * as theme from './theme'

const mediumButtonSvgPath =
  'M8.2131527,1.1780982 C33.4754351,0.392699401 58.7377176,8.68651249e-16 84,0 C109.262282,0 134.524564,0.392699392 159.786846,1.17809818 L159.786846,1.17809733 C163.914418,1.30642263 167.266049,4.55531362 167.522775,8.67689205 C167.840925,13.7845947 168,18.8922973 168,24 C168,29.1077024 167.840925,34.2154047 167.522775,39.3231071 L167.522776,39.3231072 C167.266049,43.4446855 163.914419,46.6935765 159.786847,46.8219018 C134.524565,47.6073006 109.262282,48 84,48 C58.7377179,48 33.4754357,47.6073006 8.21315362,46.8219018 L8.21315359,46.8219027 C4.08558171,46.6935774 0.733951354,43.4446864 0.477225216,39.323108 C0.159075072,34.2154053 1.09464805e-15,29.1077027 0,24 C0,18.8922976 0.159075055,13.7845953 0.477225164,8.67689288 L0.477224439,8.67689284 C0.733950559,4.55531446 4.08558087,1.3064235 8.2131527,1.1780982 Z'
const largeButtonSvgPath =
  'M8.42634282,1.23769878 C42.9508952,0.412566259 77.4754476,8.90352909e-16 112,0 C146.52455,0 181.049101,0.41256621 215.573651,1.23769863 L215.573651,1.23769252 C219.659026,1.33533246 223.014077,4.49631741 223.354678,8.56863996 C223.784893,13.7124266 224,18.8562133 224,24 C224,29.1437864 223.784893,34.2875727 223.354678,39.4313591 L223.354678,39.4313591 C223.014078,43.5036787 219.659029,46.6646613 215.573657,46.7623012 C181.049105,47.5874337 146.524552,48 112,48 C77.4754497,48 42.9508993,47.5874338 8.426349,46.7623014 L8.42634886,46.7623075 C4.34097424,46.6646675 0.985922595,43.5036826 0.645322498,39.43136 C0.215107499,34.2875734 1.46984178e-15,29.1437867 0,24 C0,18.8562136 0.215107472,13.7124273 0.645322417,8.56864093 L0.645322145,8.56864091 C0.985921973,4.49632132 4.34097116,1.33533865 8.42634282,1.23769878 Z'
const miniButtonSvgPath =
  'M7.78971703,0.605636674 C17.6931447,0.201878891 27.5965723,5.08528333e-16 37.5,0 C47.4034286,0 57.3068573,0.201878932 67.2102859,0.605636795 L67.2102858,0.605639326 C71.401853,0.776527436 74.7495111,4.15620053 74.8804974,8.3492043 C74.9601658,10.8994695 75,13.4497348 75,16 C75,18.5502672 74.9601657,21.1005344 74.8804972,23.6508017 L74.8804916,23.6508015 C74.7495052,27.8438036 71.4018485,31.2234753 67.210283,31.3943633 C57.3068553,31.7981211 47.4034277,32 37.5,32 C27.5965714,32 17.6931427,31.7981211 7.78971406,31.3943632 L7.78971416,31.3943607 C3.598147,31.2234726 0.250488947,27.8437995 0.119502605,23.6507957 C0.0398342015,21.1005305 3.65996971e-16,18.5502652 0,16 C0,13.4497328 0.0398342636,10.8994656 0.119502791,8.34919834 L0.119508361,8.34919852 C0.250494753,4.15619641 3.59815152,0.776524699 7.78971703,0.605636674 Z'
const smallButtonSvgPath =
  'M7.95482386,1.06530977 C23.9698826,0.355103257 39.9849413,8.26023982e-16 56,0 C72.0150604,0 88.0301209,0.355103333 104.045181,1.06531 L104.045181,1.06531509 C108.193999,1.24929927 111.512167,4.57727019 111.683911,8.72661238 C111.894637,13.8177416 112,18.9088708 112,24 C112,29.0911295 111.894637,34.1822591 111.683911,39.2733886 L111.683911,39.2733886 C111.512166,43.4227331 108.193996,46.750706 104.045176,46.9346902 C88.0301174,47.6448967 72.0150587,48 56,48 C39.9849396,48 23.9698791,47.6448967 7.95481867,46.93469 L7.9548189,46.9346849 C3.80600141,46.7507007 0.487833404,43.4227298 0.316088831,39.2733876 C0.105362944,34.1822584 7.27397427e-16,29.0911292 0,24 C0,18.9088705 0.105362957,13.8177409 0.316088871,8.7266114 L0.316089384,8.72661142 C0.487834067,4.57726686 3.80600399,1.24929404 7.95482386,1.06530977 Z'

export class PillowButton extends Component {
  static defaultProps = {
    onPress () {},
    onLongPress () {},
    size: 'medium',
    tintColor: theme.TEAL,
  }

  getSvgProps () {
    switch (this.props.size) {
      case 'mini':
        return {width: 75, height: 34, path: miniButtonSvgPath}
      case 'small':
        return {width: 112, height: 48, path: smallButtonSvgPath}
      case 'large':
        return {width: 224, height: 48, path: largeButtonSvgPath}
      case 'medium':
      default:
        return {width: 168, height: 48, path: mediumButtonSvgPath}
    }
  }

  render () {
    const {width, height, path} = this.getSvgProps()

    return (
      <TouchableOpacity
        disabled={this.props.disabled}
        onPress={this.props.onPress}
        onLongPress={this.props.onLongPress}
        activeOpacity={0.85}>
        <View style={styles.shadow}>
          <PillowShape
            tintColor={this.props.tintColor}
            width={width}
            height={height}
            path={path}
          />
          <View
            style={[
              styles.textContent,
              {width, height},
              this.props.wrapperStyle,
            ]}>
            {this.props.iconSrc ? (
              <Image style={styles.icon} source={this.props.iconSrc} />
            ) : null}
            <Txt
              numberOfLines={1}
              style={[{color: 'white'}, this.props.textStyle]}>
              {this.props.children}
            </Txt>
          </View>
        </View>
      </TouchableOpacity>
    )
  }
}

export const PillowShape = props => (
  <Svg
    width={props.width}
    height={props.height}
    viewBox={`0 0 ${props.width} ${props.height}`}>
    <G id="Button/Medium/Primary">
      <Path fill={props.tintColor} d={props.path} />
    </G>
  </Svg>
)

const styles = StyleSheet.create({
  icon: {
    marginHorizontal: 5,
    height: 20,
    width: 20,
  },
  shadow: {
    elevation: 4,
    shadowColor: 'rgba(0,0,0,.7)',
    shadowOffset: {x: 0, y: 2},
    shadowRadius: 4,
  },
  textContent: {
    flexDirection: 'row',
    paddingHorizontal: 10,
    alignItems: 'center',
    justifyContent: 'center',
    position: 'absolute',
  },
})
